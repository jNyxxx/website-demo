<!DOCTYPE html>
<html>
<head>
    <title>BunnyTears Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@700&family=Poppins:wght@400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #fcfcfc; padding: 40px; color: #444; }
        h1 { font-family: 'Quicksand', sans-serif; color: #ffc2d1; margin-bottom: 30px; }
        .order-card { background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-left: 5px solid #ffc2d1; }
        .order-header { display: flex; justify-content: space-between; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .order-id { font-weight: bold; color: #888; }
        .order-items { margin-left: 20px; }
        .order-total { font-size: 1.2rem; font-weight: bold; color: #ffc2d1; margin-top: 10px; text-align: right; }
        ul { list-style: none; padding: 0; }
        li { margin-bottom: 5px; font-size: 0.95rem; }
    </style>
</head>
<body>
    <h1>ðŸŒ¸ BunnyTears Orders</h1>
    <div id="orders-list">Loading orders...</div>

    <script>
        async function loadOrders() {
            const res = await fetch('/api/admin/orders');
            const orders = await res.json();
            const container = document.getElementById('orders-list');
            
            if(orders.length === 0) {
                container.innerHTML = "No orders yet!";
                return;
            }

            container.innerHTML = orders.map(order => {
                // The database sends items as JSON, we parse it
                const itemsList = order.items.map(i => `<li>âœ¨ ${i.name} ($${i.price})</li>`).join('');
                
                return `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <strong>${order.customer_name}</strong><br>
                            <small>${order.customer_email}</small>
                        </div>
                        <div class="order-id">Order #${order.id}</div>
                    </div>
                    <ul class="order-items">${itemsList}</ul>
                    <div class="order-total">Total: $${order.total}</div>
                </div>
                `;
            }).join('');
        }
        loadOrders();
    </script>
</body>
</html>